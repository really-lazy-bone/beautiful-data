<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Beautiful-data by really-lazy-bone</title>

    <!-- Semantic UI CSS -->
    <link rel="stylesheet" href="lib/semantic-ui/css/semantic.css">

    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <h2>Barebone visualization using google speadsheet as the backend</h2>

    <div id="chartcontainer"></div>

    <!-- Read the javascript at the end of the body tag to increase the page load speed -->
    <script type="text/javascript" src="lib/jquery/jquery-2.1.0.js"></script>
    <script type="text/javascript" src="lib/jquery/jquery.csv-0.71.js"></script>
    <script type="text/javascript" src="lib/highchart/js/highcharts.js"></script>

    <script type="text/javascript">

      $.get('csv/january_flickrdump.csv', function(data) {
        var csvData = $.csv.toObjects(data);

        reOrganizeDataByLocale(csvData);
      }, 'text');

      var reOrganizeDataByLocale = function(data) {
        // Organize the data by the locale
        var localeCategory = [];
        var localeCount = [];

        for (var i = 0; i < data.length; i++) {
          // if the locale caregory does not contain the current item
          if (localeCategory.indexOf(data[i].locale) == -1) {
            localeCategory.push(data[i].locale);
            localeCount.push(parseInt(1));
          } else {
            localeCount[localeCategory.indexOf(data[i].locale)] = parseInt(localeCount[localeCategory.indexOf(data[i].locale)]) + 1;
          };
        };

        console.log(localeCategory);
        console.log(localeCount);
      };

    </script>
  </body>
</html>
